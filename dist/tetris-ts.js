!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tetris=e():t.Tetris=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=i(7),o=i(8),r=i(9),a=i(10),c=i(11),h=i(12),u=i(13);!function(t){t[t.BLOCK=0]="BLOCK",t[t.LINE=1]="LINE",t[t.Z=2]="Z",t[t.Z_INV=3]="Z_INV",t[t.T=4]="T",t[t.L=5]="L",t[t.L_INV=6]="L_INV"}(n=e.GamePieceType||(e.GamePieceType={})),e.newGamePiece=function(){var t=Math.floor(Math.random()*Math.floor(7));switch(t){case n.BLOCK:return new s.default;case n.LINE:return new o.default;case n.Z:return new r.default;case n.Z_INV:return new a.default;case n.T:return new c.default;case n.L:return new h.default;case n.L_INV:return new u.default;default:throw Error("[tetris-ts] Invalid GamePieceType '"+t+"'")}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),s=function(){function t(t){this.type=t,this.cols=n.GAME_COLS,this.rows=n.GAME_ROWS,this.xOffset=(n.GAME_COLS/2%2?n.GAME_COLS/2:n.GAME_COLS/2-n.GAME_COLS%2)-1,this.color=n.COLORS[Math.floor(Math.random()*Math.floor(n.COLORS.length))]}return t.prototype.getLeftTransform=function(){var t=[];return this.position.forEach((function(e){t.push({x:e.x-1,y:e.y})})),t},t.prototype.getRightTransform=function(){var t=[];return this.position.forEach((function(e){t.push({x:e.x+1,y:e.y})})),t},t.prototype.getDownTransform=function(){var t=[];return this.position.forEach((function(e){t.push({x:e.x,y:e.y+1})})),t},t.prototype.getTransform=function(){return this.position},t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t,t.instance.handlers=[]),t.instance},t.prototype.subscribe=function(t,e){this.handlers.push({event:t,handler:e})},t.prototype.publish=function(t){this.handlers.forEach((function(e){e.event===t.event&&e.handler(t)}))},t.prototype.publishGamePieceEvent=function(t){this.handlers.forEach((function(e){e.event===t.event&&e.handler(t)}))},t.prototype.publishRowEvent=function(t){this.handlers.forEach((function(e){e.event===t.event&&e.handler(t)}))},t.prototype.publishStatsEvent=function(t){this.handlers.forEach((function(e){e.event===t.event&&e.handler(t)}))},t}();e.EventBus=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COLORS=[{color:"red",border:"darkred"},{color:"orange",border:"black"},{color:"yellow",border:"black"},{color:"lime",border:"darkgreen"},{color:"cyan",border:"darkblue"},{color:"blue",border:"darkblue"},{color:"magenta",border:"indigo"},{color:"indigo",border:"black"}],e.GAME_COLS=10,e.GAME_ROWS=20,e.FRAME_CONST=60.0988},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSED=2]="PAUSED",t[t.STOPPED=3]="STOPPED"}(e.GameState||(e.GameState={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),s=i(6),o=i(14),r=function(t,e){if(!t)throw new Error("[tetris-ts] No DOM Element provided.");this.eventBus=n.EventBus.getInstance(),this.gameEngine=new s.default(e),this.uiEngine=new o.default(t),this.eventBus.publish({event:"INIT"})};t.exports=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),s=i(4),o=i(0),r=i(2),a=function(){function t(t){this.statsCallback=t,this.eventBus=r.EventBus.getInstance(),this.subscribeToEvents(),this.resetGame()}return t.prototype.subscribeToEvents=function(){var t=this;this.eventBus.subscribe("PLAY",(function(){t.startGame()})),this.eventBus.subscribe("INPUT_LEFT",(function(){t.moveLeft()})),this.eventBus.subscribe("INPUT_RIGHT",(function(){t.moveRight()})),this.eventBus.subscribe("INPUT_DOWN",(function(){t.moveDown()})),this.eventBus.subscribe("INPUT_UP",(function(){t.transform()})),this.eventBus.subscribe("INPUT_SPACE",(function(){t.togglePauseGame()})),this.eventBus.subscribe("INPUT_ESC",(function(){t.gameState!==s.GameState.PLAYING&&t.gameState!==s.GameState.PAUSED||(t.gameState=s.GameState.STOPPED)}))},t.prototype.initStateMap=function(){this.stateMap=[];for(var t=0;t<n.GAME_ROWS;t++){this.stateMap[t]=[];for(var e=0;e<n.GAME_COLS;e++)this.stateMap[t][e]=!1}},t.prototype.resetGame=function(){this.initStateMap(),this.points=0,this.lineCount=0,this.level=0,this.gameState=s.GameState.INIT},t.prototype.startGame=function(){console.log("[tetris-ts] Starting Game"),this.gameState=s.GameState.PLAYING,this.activePiece=null,this.nextPiece=null,this.points=0,this.eventBus.publishStatsEvent({event:"UPDATE_POINTS",value:this.points}),this.lineCount=0,this.eventBus.publishStatsEvent({event:"UPDATE_LINES",value:this.lineCount}),this.level=0,this.eventBus.publishStatsEvent({event:"UPDATE_LEVEL",value:this.level}),this.run()},t.prototype.togglePauseGame=function(){this.gameState===s.GameState.PLAYING?this.gameState=s.GameState.PAUSED:this.gameState===s.GameState.PAUSED&&(this.gameState=s.GameState.PLAYING,this.run())},t.prototype.endGame=function(){this.gameState=s.GameState.STOPPED,this.activePiece=null,this.nextPiece=null,this.statsCallback({points:this.points,lines:this.lineCount,level:this.level}),this.resetGame()},t.prototype.run=function(){var t=this;this.gameState==s.GameState.PLAYING?this.activePiece&&this.validateTransform(this.activePiece.getDownTransform())?(this.moveDown(),setTimeout((function(){t.run()}),this.getTimeout())):this.activePiece?(this.activePiece.locking=!0,setTimeout((function(){t.activePiece.locking&&(t.activePiece=null,t.checkCompleteRows(),t.generateGamePiece()),setTimeout((function(){t.run()}),t.getTimeout())}),this.getTimeout())):(this.generateGamePiece(),setTimeout((function(){t.run()}),this.getTimeout())):this.gameState!==s.GameState.PAUSED&&this.endGame()},t.prototype.generateGamePiece=function(){this.nextPiece||(this.nextPiece=o.newGamePiece()),this.validateGamePiece(this.nextPiece.position)||(this.gameState=s.GameState.STOPPED),this.activePiece=this.nextPiece,this.addToStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"DRAW_ACTIVE",gamePiece:this.activePiece}),this.nextPiece=o.newGamePiece(),this.eventBus.publishGamePieceEvent({event:"DRAW_NEXT",gamePiece:this.nextPiece})},t.prototype.validateGamePiece=function(t){var e=this,i=!0;return t.forEach((function(t){e.stateMap[t.y][t.x]&&(i=!1)})),i},t.prototype.checkCompleteRows=function(){for(var t=this,e=[],i=0;i<n.GAME_ROWS;i++){for(var s=0,o=0;o<n.GAME_COLS;o++)this.stateMap[i][o]&&s++;s===n.GAME_COLS&&e.push(i)}e.length&&(e.forEach((function(e){t.stateMap.splice(e,1);for(var i=[],s=0;s<n.GAME_COLS;s++)i.push(!1);t.stateMap.unshift(i)})),this.calculateRowPoints(e.length),this.eventBus.publishRowEvent({event:"REMOVE_ROWS",rows:e}))},t.prototype.addToStateMap=function(t){var e=this;t.position.forEach((function(t){e.stateMap[t.y][t.x]=!0}))},t.prototype.removeFromStateMap=function(t){var e=this;t.position.forEach((function(t){e.stateMap[t.y][t.x]=!1}))},t.prototype.moveLeft=function(){if(this.gameState==s.GameState.PLAYING){var t=this.activePiece.getLeftTransform();this.validateTransform(t)&&(this.removeFromStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"ERASE_ACTIVE",gamePiece:this.activePiece}),this.activePiece.position=t,this.addToStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"DRAW_ACTIVE",gamePiece:this.activePiece}),this.activePiece.locking&&this.lockCheck())}},t.prototype.moveRight=function(){if(this.gameState==s.GameState.PLAYING){var t=this.activePiece.getRightTransform();this.validateTransform(t)&&(this.removeFromStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"ERASE_ACTIVE",gamePiece:this.activePiece}),this.activePiece.position=t,this.addToStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"DRAW_ACTIVE",gamePiece:this.activePiece}),this.activePiece.locking&&this.lockCheck())}},t.prototype.moveDown=function(){if(this.gameState==s.GameState.PLAYING){var t=this.activePiece.getDownTransform();this.validateTransform(t)&&(this.removeFromStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"ERASE_ACTIVE",gamePiece:this.activePiece}),this.activePiece.position=t,this.addToStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"DRAW_ACTIVE",gamePiece:this.activePiece}),this.activePiece.locking&&this.lockCheck())}},t.prototype.lockCheck=function(){this.validateTransform(this.activePiece.getDownTransform())&&(this.activePiece.locking=!1)},t.prototype.transform=function(){if(this.gameState==s.GameState.PLAYING){var t=this.activePiece.getTransform();this.validateTransform(t)&&(this.removeFromStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"ERASE_ACTIVE",gamePiece:this.activePiece}),this.activePiece.position=t,this.addToStateMap(this.activePiece),this.eventBus.publishGamePieceEvent({event:"DRAW_ACTIVE",gamePiece:this.activePiece}))}},t.prototype.validateTransform=function(t){var e=this,i=!0;return t.forEach((function(t){e.validateCoordinateTransform(t)||(i=!1)})),i},t.prototype.validateCoordinateTransform=function(t){try{if(this.isActivePiece(t))throw!0;if(t.x<0||t.x>=n.GAME_COLS||t.y<0||t.y>=n.GAME_ROWS)throw!1;if(this.stateMap[t.y][t.x])throw!1;return!0}catch(t){return t}},t.prototype.isActivePiece=function(t){try{return this.activePiece.position.forEach((function(e){if(t.x==e.x&&t.y==e.y)throw!0})),!1}catch(t){return t}},t.prototype.getTimeout=function(){return this.level<10?(48-5*this.level)/n.FRAME_CONST*1e3:this.level>=10&&this.level<13?5/n.FRAME_CONST*1e3:this.level>=13&&this.level<16?4/n.FRAME_CONST*1e3:this.level>=16&&this.level<19?3/n.FRAME_CONST*1e3:this.level>=19&&this.level<29?2/n.FRAME_CONST*1e3:1/n.FRAME_CONST*1e3},t.prototype.calculateRowPoints=function(t){var e;switch(t){case 1:e=40;break;case 2:e=100;break;case 3:e=300;break;case 4:e=1200}this.points+=e*(this.level+1),this.eventBus.publishStatsEvent({event:"UPDATE_POINTS",value:this.points}),this.lineCount=this.lineCount+t,this.eventBus.publishStatsEvent({event:"UPDATE_LINES",value:this.lineCount}),this.lineCount>=10*(this.level+1)&&(this.level++,this.eventBus.publishStatsEvent({event:"UPDATE_LEVEL",value:this.level}))},t}();e.default=a},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=i(0),a=function(t){function e(){var e=t.call(this,r.GamePieceType.BLOCK)||this;return e.position=[{x:e.xOffset,y:0},{x:e.xOffset+1,y:0},{x:e.xOffset,y:1},{x:e.xOffset+1,y:1}],e.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}],e.nextPieceDims={rows:2,cols:2},e}return s(e,t),e}(o.default);e.default=a},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=i(0),a=function(t){function e(){var e=t.call(this,r.GamePieceType.LINE)||this;return e.position=[{x:e.xOffset-1,y:0},{x:e.xOffset,y:0},{x:e.xOffset+1,y:0},{x:e.xOffset+2,y:0}],e.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:3,y:0}],e.nextPieceDims={rows:1,cols:4},e}return s(e,t),e.prototype.getTransform=function(){return this.position[0].y===this.position[1].y?this._verticalTransform():this._horizontalTransform()},e.prototype._horizontalTransform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x-1+t,y:this.position[0].y+3+e},{x:this.position[1].x+t,y:this.position[1].y+2+e},{x:this.position[2].x+1+t,y:this.position[2].y+1+e},{x:this.position[3].x+2+t,y:this.position[3].y+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._horizontalTransform(++t,e);if(i[n].x>=this.cols)return this._horizontalTransform(--t,e);if(i[n].y<0)return this._horizontalTransform(t,++e);if(i[n].y>=this.rows)return this._horizontalTransform(t,--e)}return i},e.prototype._verticalTransform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+1+t,y:this.position[0].y-3+e},{x:this.position[1].x+t,y:this.position[1].y-2+e},{x:this.position[2].x-1+t,y:this.position[2].y-1+e},{x:this.position[3].x-2+t,y:this.position[3].y+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._verticalTransform(++t,e);if(i[n].x>=this.cols)return this._verticalTransform(--t,e);if(i[n].y<0)return this._verticalTransform(t,++e);if(i[n].y>=this.rows)return this._verticalTransform(t,--e)}return i},e}(o.default);e.default=a},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=i(0),a=function(t){function e(){var e=t.call(this,r.GamePieceType.Z)||this;return e.position=[{x:e.xOffset-1,y:0},{x:e.xOffset,y:0},{x:e.xOffset,y:1},{x:e.xOffset+1,y:1}],e.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:2,y:1}],e.nextPieceDims={rows:2,cols:3},e}return s(e,t),e.prototype.getTransform=function(){return this.position[0].y===this.position[1].y?this._verticalTransform():this._horizontalTransform()},e.prototype._horizontalTransform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x-1+t,y:this.position[0].y+1+e},{x:this.position[1].x+t,y:this.position[1].y+e},{x:this.position[2].x+1+t,y:this.position[2].y+1+e},{x:this.position[3].x+2+t,y:this.position[3].y+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._horizontalTransform(++t,e);if(i[n].x>=this.cols)return this._horizontalTransform(--t,e);if(i[n].y<0)return this._horizontalTransform(t,++e);if(i[n].y>=this.rows)return this._horizontalTransform(t,--e)}return i},e.prototype._verticalTransform=function(t,e){e=e||0,t=t||0;for(var i=[{x:this.position[0].x+1+e,y:this.position[0].y-1+t},{x:this.position[1].x+e,y:this.position[1].y+t},{x:this.position[2].x-1+e,y:this.position[2].y-1+t},{x:this.position[3].x-2+e,y:this.position[3].y+t}],n=0;n<i.length;n++){if(i[n].x<0)return this._verticalTransform(++e,t);if(i[n].x>=this.cols)return this._verticalTransform(--e,t);if(i[n].y<0)return this._verticalTransform(e,++t);if(i[n].y>=this.rows)return this._verticalTransform(e,--t)}return i},e}(o.default);e.default=a},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=i(0),a=function(t){function e(){var e=t.call(this,r.GamePieceType.Z_INV)||this;return e.position=[{x:e.xOffset,y:0},{x:e.xOffset+1,y:0},{x:e.xOffset-1,y:1},{x:e.xOffset,y:1}],e.nextPieceMap=[{x:1,y:0},{x:2,y:0},{x:0,y:1},{x:1,y:1}],e.nextPieceDims={rows:2,cols:3},e}return s(e,t),e.prototype.getTransform=function(){return this.position[0].y===this.position[1].y?this._verticalTransform():this._horizontalTransform()},e.prototype._horizontalTransform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+t,y:this.position[0].y+e},{x:this.position[1].x+1+t,y:this.position[1].y+1+e},{x:this.position[2].x-2+t,y:this.position[2].y+1+e},{x:this.position[3].x-1+t,y:this.position[3].y+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._horizontalTransform(++t,e);if(i[n].x>=this.cols)return this._horizontalTransform(--t,e);if(i[n].y<0)return this._horizontalTransform(t,++e);if(i[n].y>=this.rows)return this._horizontalTransform(t,--e)}return i},e.prototype._verticalTransform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+t,y:this.position[0].y+e},{x:this.position[1].x-1+t,y:this.position[1].y-1+e},{x:this.position[2].x+2+t,y:this.position[2].y-1+e},{x:this.position[3].x+1+t,y:this.position[3].y+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._verticalTransform(++t,e);if(i[n].x>=this.cols)return this._verticalTransform(--t,e);if(i[n].y<0)return this._verticalTransform(t,++e);if(i[n].y>=this.rows)return this._verticalTransform(t,--e)}return i},e}(o.default);e.default=a},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=i(0),a=function(t){function e(){var e=t.call(this,r.GamePieceType.T)||this;return e.position=[{x:e.xOffset-1,y:0},{x:e.xOffset,y:0},{x:e.xOffset+1,y:0},{x:e.xOffset,y:1}],e.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:1,y:1}],e.nextPieceDims={rows:2,cols:3},e}return s(e,t),e.prototype.getTransform=function(){return this.position[3].y===this.position[1].y?this.position[3].x<this.position[1].x?this._180Transform():this._0Transform():this.position[3].y>this.position[1].y?this._90Transform():this._270Transform()},e.prototype._0Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+t,y:this.position[0].y-2+e},{x:this.position[1].x+1+t,y:this.position[1].y-1+e},{x:this.position[2].x+2+t,y:this.position[2].y+e},{x:this.position[3].x+t,y:this.position[3].y+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._0Transform(++t,e);if(i[n].x>=this.cols)return this._0Transform(--t,e);if(i[n].y<0)return this._0Transform(t,++e);if(i[n].y>=this.rows)return this._0Transform(t,--e)}return i},e.prototype._90Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+2+t,y:this.position[0].y+e},{x:this.position[1].x+1+t,y:this.position[1].y+1+e},{x:this.position[2].x+t,y:this.position[2].y+2+e},{x:this.position[3].x+t,y:this.position[3].y+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._90Transform(++t,e);if(i[n].x>=this.cols)return this._90Transform(--t,e);if(i[n].y<0)return this._90Transform(t,++e);if(i[n].y>=this.rows)return this._90Transform(t,--e)}return i},e.prototype._180Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+t,y:this.position[0].y+2+e},{x:this.position[1].x-1+t,y:this.position[1].y+1+e},{x:this.position[2].x-2+t,y:this.position[2].y+e},{x:this.position[3].x+t,y:this.position[3].y+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._180Transform(++t,e);if(i[n].x>=this.cols)return this._180Transform(--t,e);if(i[n].y<0)return this._180Transform(t,++e);if(i[n].y>=this.rows)return this._180Transform(t,--e)}return i},e.prototype._270Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x-2+t,y:this.position[0].y+e},{x:this.position[1].x-1+t,y:this.position[1].y-1+e},{x:this.position[2].x+t,y:this.position[2].y-2+e},{x:this.position[3].x+t,y:this.position[3].y+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._270Transform(++t,e);if(i[n].x>=this.cols)return this._270Transform(--t,e);if(i[n].y<0)return this._270Transform(t,++e);if(i[n].y>=this.rows)return this._270Transform(t,--e)}return i},e}(o.default);e.default=a},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=i(0),a=function(t){function e(){var e=t.call(this,r.GamePieceType.L)||this;return e.position=[{x:e.xOffset-1,y:0},{x:e.xOffset,y:0},{x:e.xOffset+1,y:0},{x:e.xOffset-1,y:1}],e.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:0,y:1}],e.nextPieceDims={rows:2,cols:3},e}return s(e,t),e.prototype.getTransform=function(){return this.position[0].y===this.position[3].y?this.position[0].x>this.position[3].x?this._180Transform():this._0Transform():this.position[0].y<this.position[3].y?this._90Transform():this._270Transform()},e.prototype._0Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+t,y:this.position[0].y-2+e},{x:this.position[1].x+1+t,y:this.position[1].y-1+e},{x:this.position[2].x+2+t,y:this.position[2].y+e},{x:this.position[3].x-1+t,y:this.position[3].y-1+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._0Transform(++t,e);if(i[n].x>=this.cols)return this._0Transform(--t,e);if(i[n].y<0)return this._0Transform(t,++e);if(i[n].y>=this.rows)return this._0Transform(t,--e)}return i},e.prototype._90Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+2+t,y:this.position[0].y+e},{x:this.position[1].x+1+t,y:this.position[1].y+1+e},{x:this.position[2].x+t,y:this.position[2].y+2+e},{x:this.position[3].x+1+t,y:this.position[3].y-1+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._90Transform(++t,e);if(i[n].x>=this.cols)return this._90Transform(--t,e);if(i[n].y<0)return this._90Transform(t,++e);if(i[n].y>=this.rows)return this._90Transform(t,--e)}return i},e.prototype._180Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+t,y:this.position[0].y+2+e},{x:this.position[1].x-1+t,y:this.position[1].y+1+e},{x:this.position[2].x-2+t,y:this.position[2].y+e},{x:this.position[3].x+1+t,y:this.position[3].y+1+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._180Transform(++t,e);if(i[n].x>=this.cols)return this._180Transform(--t,e);if(i[n].y<0)return this._180Transform(t,++e);if(i[n].y>=this.rows)return this._180Transform(t,--e)}return i},e.prototype._270Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x-2+t,y:this.position[0].y+e},{x:this.position[1].x-1+t,y:this.position[1].y-1+e},{x:this.position[2].x+t,y:this.position[2].y-2+e},{x:this.position[3].x-1+t,y:this.position[3].y+1+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._270Transform(++t,e);if(i[n].x>=this.cols)return this._270Transform(--t,e);if(i[n].y<0)return this._270Transform(t,++e);if(i[n].y>=this.rows)return this._270Transform(t,--e)}return i},e}(o.default);e.default=a},function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=i(0),a=function(t){function e(){var e=t.call(this,r.GamePieceType.L_INV)||this;return e.position=[{x:e.xOffset-1,y:0},{x:e.xOffset,y:0},{x:e.xOffset+1,y:0},{x:e.xOffset+1,y:1}],e.nextPieceMap=[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:2,y:1}],e.nextPieceDims={rows:2,cols:3},e}return s(e,t),e.prototype.getTransform=function(){return this.position[2].y===this.position[3].y?this.position[2].x>this.position[3].x?this._180Transform():this._0Transform():this.position[2].y<this.position[3].y?this._90Transform():this._270Transform()},e.prototype._0Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+t,y:this.position[0].y-2+e},{x:this.position[1].x+1+t,y:this.position[1].y-1+e},{x:this.position[2].x+2+t,y:this.position[2].y+e},{x:this.position[3].x+1+t,y:this.position[3].y+1+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._0Transform(++t,e);if(i[n].x>=this.cols)return this._0Transform(--t,e);if(i[n].y<0)return this._0Transform(t,++e);if(i[n].y>=this.rows)return this._0Transform(t,--e)}return i},e.prototype._90Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+2+t,y:this.position[0].y+e},{x:this.position[1].x+1+t,y:this.position[1].y+1+e},{x:this.position[2].x+t,y:this.position[2].y+2+e},{x:this.position[3].x-1+t,y:this.position[3].y+1+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._90Transform(++t,e);if(i[n].x>=this.cols)return this._90Transform(--t,e);if(i[n].y<0)return this._90Transform(t,++e);if(i[n].y>=this.rows)return this._90Transform(t,--e)}return i},e.prototype._180Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x+t,y:this.position[0].y+2+e},{x:this.position[1].x-1+t,y:this.position[1].y+1+e},{x:this.position[2].x-2+t,y:this.position[2].y+e},{x:this.position[3].x-1+t,y:this.position[3].y-1+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._180Transform(++t,e);if(i[n].x>=this.cols)return this._180Transform(--t,e);if(i[n].y<0)return this._180Transform(t,++e);if(i[n].y>=this.rows)return this._180Transform(t,--e)}return i},e.prototype._270Transform=function(t,e){t=t||0,e=e||0;for(var i=[{x:this.position[0].x-2+t,y:this.position[0].y+e},{x:this.position[1].x-1+t,y:this.position[1].y-1+e},{x:this.position[2].x+t,y:this.position[2].y-2+e},{x:this.position[3].x+1+t,y:this.position[3].y-1+e}],n=0;n<i.length;n++){if(i[n].x<0)return this._270Transform(++t,e);if(i[n].x>=this.cols)return this._270Transform(--t,e);if(i[n].y<0)return this._270Transform(t,++e);if(i[n].y>=this.rows)return this._270Transform(t,--e)}return i},e}(o.default);e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),s=i(2),o=i(15);i(16);var r=function(){function t(t){console.log("[tetris-ts] rootElement dimensions "+t.clientWidth+"x"+t.clientHeight),this.rootElement=t,this.uiElements={},this.render=new o.default(this.rootElement,this.uiElements),this.eventBus=s.EventBus.getInstance(),this.createInputListeners(),this.setupEventHandlers(),this.gameState=n.GameState.INIT}return t.prototype.createInputListeners=function(){var t=this;document.addEventListener("keydown",(function(e){switch(e.preventDefault(),e.code){case"ArrowLeft":t.eventBus.publish({event:"INPUT_LEFT"});break;case"ArrowRight":t.eventBus.publish({event:"INPUT_RIGHT"});break;case"ArrowDown":t.eventBus.publish({event:"INPUT_DOWN"});break;case"ArrowUp":t.eventBus.publish({event:"INPUT_UP"});break;case"Space":t.eventBus.publish({event:"INPUT_SPACE"});break;case"Escape":t.eventBus.publish({event:"INPUT_ESC"})}}))},t.prototype.setupEventHandlers=function(){var t=this;this.eventBus.subscribe("INIT",(function(){t.createMainMenu()})),this.eventBus.subscribe("PLAY_CLICK",(function(){t.playClickHandler()})),this.eventBus.subscribe("DRAW_ACTIVE",(function(e){t.gameState!==n.GameState.PLAYING&&t.gameState!==n.GameState.PAUSED||t.render.drawGamePiece(e.gamePiece)})),this.eventBus.subscribe("ERASE_ACTIVE",(function(e){t.gameState!==n.GameState.PLAYING&&t.gameState!==n.GameState.PAUSED||t.render.eraseGamePiece(e.gamePiece)})),this.eventBus.subscribe("REMOVE_ROWS",(function(e){t.gameState!==n.GameState.PLAYING&&t.gameState!==n.GameState.PAUSED||t.render.removeRow(e.rows)})),this.eventBus.subscribe("UPDATE_POINTS",(function(e){t.render.updatePoints(e.value)})),this.eventBus.subscribe("UPDATE_LINES",(function(e){t.render.updateLines(e.value)})),this.eventBus.subscribe("UPDATE_LEVEL",(function(e){t.render.updateLevel(e.value)})),this.eventBus.subscribe("DRAW_NEXT",(function(e){t.gameState!==n.GameState.PLAYING&&t.gameState!==n.GameState.PAUSED||t.render.drawNextPiece(e.gamePiece)})),this.eventBus.subscribe("INPUT_SPACE",this.inputSpaceHandler.bind(this)),this.eventBus.subscribe("INPUT_ESC",(function(){t.resetUI()}))},t.prototype.playClickHandler=function(){this.gameState=n.GameState.PLAYING,this.createGameBoard()},t.prototype.inputSpaceHandler=function(){switch(this.gameState){case n.GameState.PLAYING:this.togglePause(),this.gameState=n.GameState.PAUSED;break;case n.GameState.PAUSED:this.togglePause(),this.gameState=n.GameState.PLAYING}},t.prototype.createMainMenu=function(){var t=this;this.render.createMainContainer(),this.render.createMenuPanel((function(){t.eventBus.publish({event:"PLAY_CLICK"})})),this.eventBus.publish({event:"UI_READY"})},t.prototype.createGameBoard=function(){this.uiElements.container.removeChild(this.uiElements.mainPanel),this.render.createGamePanel(),this.eventBus.publish({event:"PLAY"})},t.prototype.resetUI=function(){var t=this;this.gameState=n.GameState.STOPPED,this.rootElement.innerHTML="",Object.keys(this.uiElements).forEach((function(e){delete t.uiElements[e]})),this.createMainMenu()},t.prototype.togglePause=function(){this.gameState===n.GameState.PLAYING?this.uiElements.container.classList.add("paused"):this.uiElements.container.classList.remove("paused")},t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),s=function(){function t(t,e){this.rootElement=t,this.uiElements=e}return t.prototype.createMainContainer=function(){var t=document.createElement("div");t.classList.add("container"),this.uiElements.container=t,this.rootElement.appendChild(this.uiElements.container)},t.prototype.createMenuPanel=function(t){var e=document.createElement("div");e.classList.add("panel"),e.classList.add("main-panel");var i=document.createElement("div");i.classList.add("text-center"),i.innerHTML="<h3>TETRIS-TS</h3>",e.appendChild(i);var n=document.createElement("div");n.classList.add("controls");var s=document.createElement("div");s.innerHTML="CONTROLS",s.classList.add("label"),n.appendChild(s),this.uiElements.controls=n,this.createControlTable(),e.appendChild(n);var o=document.createElement("div");o.classList.add("text-center"),o.innerHTML="<div class='button'>PLAY</div>",this.uiElements.playButton=o,o.onclick=function(){t()},e.appendChild(o),this.uiElements.mainPanel=e,this.uiElements.container.appendChild(this.uiElements.mainPanel)},t.prototype.createControlTable=function(){var t=document.createElement("table");t.classList.add("control-table"),[{name:"LEFT ARROW",desc:"MOVE LEFT"},{name:"RIGHT ARROW",desc:"MOVE RIGHT"},{name:"DOWN ARROW",desc:"MOVE DOWN"},{name:"UP ARROW",desc:"ROTATE"},{name:"SPACE",desc:"PAUSE"},{name:"ESC",desc:"QUIT"}].forEach((function(e){var i=document.createElement("tr"),n=document.createElement("td");n.innerHTML=e.name,i.appendChild(n);var s=document.createElement("td");s.innerHTML=e.desc,i.appendChild(s),t.appendChild(i)})),this.uiElements.controls.appendChild(t)},t.prototype.createGamePanel=function(){var t=document.createElement("div");t.classList.add("panel"),t.classList.add("game-panel"),this.uiElements.gamePanel=t,this.uiElements.container.appendChild(this.uiElements.gamePanel),this.createStatsPanel(),this.createGameBoard()},t.prototype.createStatsPanel=function(){var t=document.createElement("div");t.classList.add("stats-panel");var e=document.createElement("div");e.classList.add("stats-label"),e.innerHTML="POINTS",t.appendChild(e);var i=document.createElement("div");i.classList.add("stats-value"),this.uiElements.points=i,t.appendChild(i);var n=document.createElement("div");n.classList.add("stats-label"),n.innerHTML="LINES",t.appendChild(n);var s=document.createElement("div");s.classList.add("stats-value"),this.uiElements.lines=s,t.appendChild(s);var o=document.createElement("div");o.classList.add("stats-label"),o.innerHTML="LEVEL",t.appendChild(o);var r=document.createElement("div");r.classList.add("stats-value"),this.uiElements.level=r,t.appendChild(r),this.uiElements.statsPanel=t,this.uiElements.container.appendChild(t),this.createNextPieceContainer()},t.prototype.createNextPieceContainer=function(){var t=this.uiElements.statsPanel.clientWidth-30,e=document.createElement("div");e.classList.add("next-piece-container"),e.setAttribute("style","height: "+t+"px; width: "+t),this.uiElements.nextPieceContainer=e,this.uiElements.statsPanel.appendChild(e)},t.prototype.createGameBoard=function(){var t=document.createElement("div");t.classList.add("game-board"),this.uiElements.gameBoard=t,this.uiElements.gamePanel.appendChild(this.uiElements.gameBoard),this.createGameBoardSpaces()},t.prototype.createGameBoardSpaces=function(){for(var t=0;t<n.GAME_ROWS;t++){var e=document.createElement("div");e.classList.add("game-row"),e.style.cssText="height: "+this.uiElements.gameBoard.clientWidth/n.GAME_COLS+"px;";for(var i=0;i<n.GAME_COLS;i++){var s=document.createElement("div");s.classList.add("game-space"),e.appendChild(s)}this.uiElements.gameBoard.appendChild(e)}},t.prototype.createNextPieceSpaces=function(t,e){for(var i=this.uiElements.statsPanel.clientWidth-30,n=0;n<t;n++){var s=document.createElement("div");s.setAttribute("style","line-height: "+i/4+"px");for(var o=0;o<e;o++){var r=document.createElement("div");r.classList.add("next-piece-cell"),r.setAttribute("style","height: "+i/5+"px; \n                    width: "+i/5+"px;"),s.appendChild(r)}this.uiElements.nextPiece.appendChild(s)}},t.prototype.drawGamePiece=function(t){var e=this;t.position.forEach((function(i){var n=e.uiElements.gameBoard.children[i.y].children[i.x];n.classList.add("game-piece"),n.setAttribute("style","background-color: "+t.color.color+"; border-color: "+t.color.border+";")}))},t.prototype.eraseGamePiece=function(t){var e=this;t.position.forEach((function(t){var i=e.uiElements.gameBoard.children[t.y].children[t.x];i.classList.remove("game-piece"),i.setAttribute("style","")}))},t.prototype.drawRow=function(){var t=document.createElement("div");t.classList.add("game-row"),t.style.cssText="height: "+this.uiElements.gameBoard.clientWidth/n.GAME_COLS+"px;";for(var e=0;e<n.GAME_COLS;e++){var i=document.createElement("div");i.classList.add("game-space"),t.appendChild(i)}this.uiElements.gameBoard.insertBefore(t,this.uiElements.gameBoard.children[0])},t.prototype.removeRow=function(t){var e=this;t.forEach((function(t){e.uiElements.gameBoard.children[t].remove(),e.drawRow()}))},t.prototype.drawNextPiece=function(t){this.uiElements.nextPiece&&this.uiElements.nextPieceContainer.removeChild(this.uiElements.nextPiece);var e=document.createElement("div");this.uiElements.nextPiece=e,this.createNextPieceSpaces(t.nextPieceDims.rows,t.nextPieceDims.cols),this.setNextPieceActive(t.nextPieceMap,t.color),this.uiElements.nextPieceContainer.appendChild(e)},t.prototype.setNextPieceActive=function(t,e){var i=this.uiElements.nextPiece;t.forEach((function(t){var n=i.children[t.y].children[t.x];n.setAttribute("style",n.getAttribute("style")+" background-color: "+e.color+"; border-color: "+e.border+";")}))},t.prototype.updatePoints=function(t){this.uiElements.points.innerHTML=t.toString()},t.prototype.updateLines=function(t){this.uiElements.lines.innerHTML=t.toString()},t.prototype.updateLevel=function(t){this.uiElements.level.innerHTML=t.toString()},t}();e.default=s},function(t,e,i){var n=i(17),s=i(18);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var o={insert:"head",singleton:!1},r=(n(s,o),s.locals?s.locals:{});t.exports=r},function(t,e,i){"use strict";var n,s=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),r=[];function a(t){for(var e=-1,i=0;i<r.length;i++)if(r[i].identifier===t){e=i;break}return e}function c(t,e){for(var i={},n=[],s=0;s<t.length;s++){var o=t[s],c=e.base?o[0]+e.base:o[0],h=i[c]||0,u="".concat(c," ").concat(h);i[c]=h+1;var l=a(u),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==l?(r[l].references++,r[l].updater(p)):r.push({identifier:u,updater:y(p,e),references:1}),n.push(u)}return n}function h(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var s=i.nc;s&&(n.nonce=s)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var r=o(t.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}return e}var u,l=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function p(t,e,i,n){var s=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=l(e,s);else{var o=document.createTextNode(s),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}function f(t,e,i){var n=i.css,s=i.media,o=i.sourceMap;if(s?t.setAttribute("media",s):t.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var m=null,d=0;function y(t,e){var i,n,s;if(e.singleton){var o=d++;i=m||(m=h(e)),n=p.bind(null,i,o,!1),s=p.bind(null,i,o,!0)}else i=h(e),n=f.bind(null,i,e),s=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else s()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=s());var i=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var s=a(i[n]);r[s].references--}for(var o=c(t,e),h=0;h<i.length;h++){var u=a(i[h]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}i=o}}}},function(t,e,i){(e=i(19)(!1)).push([t.i,'#tetris{color:#FFFFFF}#tetris .container{display:flex;flex:1;height:100%;background-color:black;font-family:"Lucida Console", Monaco, monospace}#tetris .main-panel{width:100%}#tetris .controls{padding:15px}#tetris .control-table{width:100%;font-size:0.75em;border:1px solid blue;padding:5px}#tetris .control-table td{text-align:center}#tetris .label{font-weight:bold;font-size:0.85em;padding:5px 0px;text-align:center;text-decoration:underline}#tetris .button{display:inline-block;background-color:black;border:1px solid blue;padding:5px;margin:5px;cursor:pointer}#tetris .button:hover{background-color:blue}#tetris .text-center{text-align:center}#tetris .game-panel{display:flex;flex:1;background-color:black}#tetris .game-board{flex:1;align-self:flex-end;border:1px solid rgba(255,255,255,0.1);margin:15px 0px 15px 15px}#tetris .game-row{display:flex;width:100%}#tetris .game-space{flex:1;border:1px dashed rgba(255,255,255,0.1)}#tetris .game-piece{border-width:1px;border-style:solid}#tetris .stats-panel{text-align:center}#tetris .stats-label{margin:5px 15px;font-size:0.75em;text-decoration:underline}#tetris .stats-value{margin:5px 15px;font-size:0.75em;margin-bottom:5px}#tetris .next-piece-container{margin:0px 5px;margin-top:15px;border:1px solid blue;display:flex;align-items:center;justify-content:center}#tetris .next-piece-cell{display:inline-block;border:1px solid black}#tetris .paused{opacity:0.5}\n',""]),t.exports=e},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var s=(r=n,a=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),o=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[i].concat(o).concat([s]).join("\n")}var r,a,c;return[i].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var s={};if(n)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(s[r]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);n&&s[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),e.push(c))}},e}}])}));